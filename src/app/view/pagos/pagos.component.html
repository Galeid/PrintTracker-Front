<button (click)="router.navigate(['/dashboard'])">Regresar</button>
<button (click)="showDialog()">Crear</button>
<p-dialog header="Crear Gasto" [(visible)]="displayDialog" [modal]="true" [style]="{ width: '50rem', height: '100%' }">
  <div class="flex flex-column gap-2 mt-2 justify-between">
    <label>Proveedor*</label>
        <p-autoComplete inputStyleClass="bg-slate-200"
        [(ngModel)]="proveedorSelected"
        [suggestions]="filteredProveedores"
        (completeMethod)="filterProveedor($event)"
        field="nombre" />
  </div>
  <div class="flex flex-column gap-2 mt-2 justify-between">
    <label>Descripcion*</label>
    <input
      class="bg-slate-200"
        pInputText
        name="descripcion"
        [(ngModel)]="gasto.descripcion" />
  </div>
  <div class="flex flex-column gap-2 mt-2 justify-between">
    <label>Monto*</label>
    <p-inputNumber inputStyleClass="bg-slate-200"
    inputId="monto" [useGrouping]="false" mode="decimal" [maxFractionDigits]="2" locale="en-US"
    [(ngModel)]="gasto.monto" />
  </div>
  <div class="flex flex-column gap-2 mt-2 justify-between">
    <label>NRO Factura</label>
    <input
      class="bg-slate-200"
        pInputText
        name="factura"
        [(ngModel)]="gasto.nroFactura" />
  </div>
  <div class="flex flex-column gap-2 mt-2 justify-between">
    <label>Tipo de Pago*</label>
    <p-dropdown
        [options]="tipoPago"
        [(ngModel)]="gasto.pago"
        optionLabel="label" optionValue="value" />
  </div>
  <div class="flex flex-column gap-2 mt-2">
    <label>Fecha*</label>
    <p-calendar
      [(ngModel)]="gasto.fecha"
      dateFormat="dd/mm/yy"
      [showButtonBar]="true"/>
  </div>
  <div class="flex justify-content-end gap-2">
    <p-button label="Cancel" severity="secondary" (onClick)="displayDialog = false" />
    <p-button label="Save" (onClick)="addGasto()" />
</div>
</p-dialog>
<p-table [value]="gastos" [tableStyle]="{ 'min-width': '50rem' }">
  <ng-template pTemplate="header">
      <tr>
        <th>Fecha</th>
          <th>Proveedor</th>
          <th>Descripcion</th>
          <th>Monto</th>
          <th>PagoEn</th>
          <th>Accion</th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-pedido>
      <tr>
          <td>{{ pedido.fecha }}</td>
          <td>{{ pedido.proveedor.nombre }}</td>
          <td>{{ pedido.descripcion }}</td>
          <td>{{ pedido.monto }}</td>
          <td>{{ pedido.tipoPago }}</td>
          <td>
                        @if (isToday(pedido.fecha)) {
              <p-button icon="pi pi-times" label="Anular" (click)="anularGasto(pedido)"/>
            }
          </td>
      </tr>
  </ng-template>
</p-table>
